{
	"info": {
		"_postman_id": "user1-alice-001",
		"name": "User 1 - Alice (Main User)",
		"description": "Discord Clone API - User 1 (Alice) - Main testing user with full permissions",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": ["{{baseUrl}}"],
							"path": ["health"]
						}
					}
				}
			]
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register Alice",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json()) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"        console.log('✅ Alice access token saved');",
									"    }",
									"    if (response.data && response.data.user && response.data.user.id) {",
									"        pm.collectionVariables.set('userId', response.data.user.id);",
									"        console.log('✅ Alice user ID saved:', response.data.user.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"alice_dev\",\n  \"email\": \"alice@discordclone.com\",\n  \"password\": \"alice123456\",\n  \"phone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "register"]
						}
					}
				},
				{
					"name": "Login Alice",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json()) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"        console.log('✅ Alice logged in successfully');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"alice@discordclone.com\",\n  \"password\": \"alice123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "login"]
						}
					}
				}
			]
		},
		{
			"name": "Profile Management",
			"item": [
				{
					"name": "Get Alice Profile",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/profile",
							"host": ["{{baseUrl}}"],
							"path": ["users", "profile"]
						}
					}
				},
				{
					"name": "Update Alice Global Name",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"globalName\": \"Alice Johnson\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/profile/global-name",
							"host": ["{{baseUrl}}"],
							"path": ["users", "profile", "global-name"]
						}
					}
				},
				{
					"name": "Update Alice Custom Status",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customStatus\": \"Working on Discord Clone\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/profile/custom-status",
							"host": ["{{baseUrl}}"],
							"path": ["users", "profile", "custom-status"]
						}
					}
				}
			]
		},
		{
			"name": "Friends Management",
			"item": [
				{
					"name": "Send Friend Request to Bob",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json()) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.id) {",
									"        pm.collectionVariables.set('friendshipId', response.data.id);",
									"        console.log('✅ Friend request to Bob sent');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"bob_dev\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/friends/request",
							"host": ["{{baseUrl}}"],
							"path": ["users", "friends", "request"]
						}
					}
				},
				{
					"name": "Send Friend Request to Charlie",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"charlie_dev\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/friends/request",
							"host": ["{{baseUrl}}"],
							"path": ["users", "friends", "request"]
						}
					}
				},
				{
					"name": "Get Alice Friends List",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/friends",
							"host": ["{{baseUrl}}"],
							"path": ["users", "friends"]
						}
					}
				},
				{
					"name": "Get Alice Incoming Requests",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/friends/requests/incoming",
							"host": ["{{baseUrl}}"],
							"path": ["users", "friends", "requests", "incoming"]
						}
					}
				}
			]
		},
		{
			"name": "User Relations",
			"item": [
				{
					"name": "Block Bob",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json()) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.id) {",
									"        pm.collectionVariables.set('relationId', response.data.id);",
									"        console.log('✅ Bob blocked successfully');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"targetUserId\": \"{{bobUserId}}\",\n  \"type\": \"BLOCKED\",\n  \"note\": \"Spam user\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/relations",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations"]
						}
					}
				},
				{
					"name": "Ignore Charlie",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"targetUserId\": \"{{charlieUserId}}\",\n  \"type\": \"IGNORED\",\n  \"note\": \"Annoying messages\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/relations",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations"]
						}
					}
				},
				{
					"name": "Mute Bob",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"targetUserId\": \"{{bobUserId}}\",\n  \"type\": \"MUTED\",\n  \"note\": \"Too many notifications\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/relations",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations"]
						}
					}
				},
				{
					"name": "Get All Relations",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations"]
						}
					}
				},
				{
					"name": "Get Blocked Users",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations/blocked",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "blocked"]
						}
					}
				},
				{
					"name": "Get Ignored Users",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations/ignored",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "ignored"]
						}
					}
				},
				{
					"name": "Get Muted Users",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations/muted",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "muted"]
						}
					}
				},
				{
					"name": "Check Relation with Bob",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations/check?targetUserId={{bobUserId}}&type=BLOCKED",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "check"],
							"query": [
								{"key": "targetUserId", "value": "{{bobUserId}}"},
								{"key": "type", "value": "BLOCKED"}
							]
						}
					}
				},
				{
					"name": "Update Relation Note",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"targetUserId\": \"{{bobUserId}}\",\n  \"type\": \"BLOCKED\",\n  \"note\": \"Updated reason for blocking\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/relations/note",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "note"]
						}
					}
				},
				{
					"name": "Remove Block from Bob",
					"request": {
						"method": "DELETE",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "{{accessToken}}"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"targetUserId\": \"{{bobUserId}}\",\n  \"type\": \"BLOCKED\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/users/relations",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations"]
						}
					}
				},
				{
					"name": "Get Relation Stats",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "{{accessToken}}"}],
						"url": {
							"raw": "{{baseUrl}}/users/relations/stats",
							"host": ["{{baseUrl}}"],
							"path": ["users", "relations", "stats"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{"key": "baseUrl", "value": "http://localhost:3000/api/v1", "type": "string"},
		{"key": "accessToken", "value": "", "type": "string"},
		{"key": "userId", "value": "", "type": "string"},
		{"key": "friendshipId", "value": "", "type": "string"},
		{"key": "bobUserId", "value": "", "type": "string"},
		{"key": "charlieUserId", "value": "", "type": "string"},
		{"key": "relationId", "value": "", "type": "string"}
	]
}
